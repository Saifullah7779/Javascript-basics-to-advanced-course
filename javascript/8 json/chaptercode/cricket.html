<!DOCTYPE html>
<html lang="en">
<head>
  <title>Cricket Game</title>
  <link rel="stylesheet" href="cricket.css">
</head>
<body>
  <h1 id="Game">Bat Ball Stump Game</h1>

  <!-- ðŸ Bat Button  -->
   <button class="choice-button" onclick="
   let computerChoice= generateComputerChoice();

    let resultMsg = getResult('Bat', computerChoice);
    // if (computerChoice === 'Ball') {
    //   resultMsg = 'User won';
    // } else if (computerChoice === 'Bat') {
    //   resultMsg =` It's a tie`;
    // } else {
    //   resultMsg = 'Computer has won';
    // }

    // alert('You have chosen Bat. Computer choice is ' + computerChoice + ' and ' + resultMsg); 
      showResult('Bat', computerChoice, resultMsg)


  ">  <img src="images/bat.png" alt="Bat image" class="choice-image"> </button>


  <!-- âš¾ Ball Button-->
  <button class="choice-button"  onclick="
     computerChoice = generateComputerChoice();
     resultMsg = getResult('Ball', computerChoice);
    // if (computerChoice === 'Ball') {
    //   resultMsg =` It's a tie`;
    // } else if (computerChoice === 'Bat') {
    //   resultMsg = 'Computer has won';
    // } else {
    //   resultMsg = 'User won';
    // }//
    // alert('You have chosen Ball. Computer choice is ' + computerChoice + ' and ' + resultMsg);

   showResult('Ball', computerChoice, resultMsg)
  ">  <img src="images/ball(1).png" alt="Ball image" class="choice-image"> </button>


  <!-- ðŸª“ Stump Button  -->
  <button class="choice-button" onclick="
   computerChoice = generateComputerChoice();
   resultMsg = getResult('Stump', computerChoice);
   
    // if (computerChoice === 'Stump') {
    //   resultMsg =` It's a tie`;
    // } else if (computerChoice === 'Ball') {
    //   resultMsg = 'Computer has won';
    // } else {
    //   resultMsg = 'User won';
    // }

    // alert('You have chosen Stump. Computer choice is ' + computerChoice + ' and ' + resultMsg);
    //   
   showResult('Stump', computerChoice, resultMsg)
  "><img src="images/stump.png" alt="Stump image" class="choice-image"> 
   </button>
  <!-- <button onclick="localStorage.clear()
     resetScore();
  ">Reset</button> -->
  <h3 id="user-move"></h3>
  <h3 id="computer-move"></h3>
  <h3 id="result"></h3>
  <h3 id="score"></h3> 
  <button onclick="localStorage.clear()
     resetScore();
  ">Reset</button>
  <script>
    let scoreStr = localStorage.getItem('Score');
    let score;
    resetScore(scoreStr);

    function resetScore(scoreStr){
    score = scoreStr ? JSON.parse(scoreStr) : {
    win:0,
    lost:0,
    tie:0
   };
    // if(scoreStr !== undefined) {
    //   score = JSON.parse(scoreStr);
    // } else {  
  
  //  score = {
  //   win:0,
  //   lost:0,
  //   tie:0
  //  }
    // displayScore: function(){
    //    return `No of matches Won:${score.win}, Lost:${score.lost}, Tie:${score.tie}`
   
    // }
    score.displayScore =  function(){
       return `Score: Won:${score.win}, Lost:${score.lost}, Tie:${score.tie}`
      }
      // document.querySelector('#score').innerText = score.displayScore();
      showResult();
    }

    function generateComputerChoice() {
    let randomNumber = Math.random() * 3;  
    let computerChoice;
    if (randomNumber > 0 && randomNumber <= 1) {
     return 'Bat';
    } else if (randomNumber > 1 && randomNumber <= 2) {
      return 'Ball';
    } else {
      return 'Stump';
    }
    
  }function getResult(userMove, computerMove){
     if(userMove === 'Bat'){

    if (computerMove === 'Ball') {
      score.win++;
      return'User won';
    } else if (computerMove === 'Bat') {
      score.tie++
      return` It's a tie`;
    } else {
      score.lost++;
      return 'Computer has won';
    }
  }else if ( userMove === 'Ball'){
    
       if (computerMove === 'Ball') {
        score.tie++;
      return ` It's a tie`;
    } else if (computerMove === 'Bat') {
      score.lost++;
      return  'Computer has won';
    } else {
      score.win++;
      return  'User won';
    }
  }else {
     if (computerMove === 'Stump') {
      score.tie++
      return` It's a tie`;
    } else if (computerMove === 'Ball') {
      score.lost++;
      return 'Computer has won';
    } else {
      score.win++
      return 'User won';
    }
   }
  }

  function showResult(userMove,computerMove,result){
    localStorage.setItem('Score',JSON.stringify(score));
    // console.log(score);
    document.querySelector('#user-move').innerText =
    userMove  ? `You have chosen ${userMove}`:'';
    document.querySelector('#computer-move').innerText =
    computerMove ?`Computer choice is ${computerMove}`:'';
    document.querySelector('#result').innerText =result||'';
    document.querySelector('#score').innerText = score.displayScore();


    // alert(`You have chosen ${userMove}.Computer choice is ${computerMove} and
    // ${result}
    
    // ${score.displayScore()}`);
  }
  </script>
</body>
</html>    